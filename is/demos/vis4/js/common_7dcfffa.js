define("common",function(e,r){"use strict";function t(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r["default"]=e,r}function n(e){var r=e,t=window.innerWidth,n=window.innerHeight,a=new f.Scene;r.conf.ambientLight&&a.add(new f.AmbientLight(r.conf.ambientLightColor,r.conf.ambientLightIntensity));var o=new f.WebGLRenderer({antialias:!0,alpha:!0});return o.setClearColor(r.conf.clearColor,r.conf.clearOpacity),o.setSize(t,n),o.setPixelRatio(window.devicePixelRatio),document.body.appendChild(o.domElement),e.scene=a,e.renderer=o,e}function a(){for(var e=300,r=100,t=20,n=5,a=new f.BufferGeometry,o=new Float32Array(e*r*t*3),i=0,c=0;e>c;c++)for(var l=0;r>l;l++)for(var u=0;t>u;u++)o[i]=c*n+Math.random()*n,o[i+1]=l*n+Math.random()*n,o[i+2]=u*n+Math.random()*n,i+=3;a.addAttribute("position",new f.BufferAttribute(o,3)),a.computeBoundingSphere();var d=new Float32Array(e*r*t*3);i=0;for(var c=0;e>c;c++)for(var l=0;r>l;l++)for(var u=0;t>u;u++)d[i]=1-.7*c/e,d[i+1]=1-.8*l/r,d[i+2]=1-.5*u/t,i+=3;a.addAttribute("color",new f.BufferAttribute(d,3));var s=new f.PointsMaterial({vertexColors:f.VertexColors,size:1.1,opacity:.2,sizeAttenuation:!1}),h=new f.Points(a,s);return h}function o(e,r){for(var t=r.lay,n=r.row,a=r.col,o=r.cellsize,i=r.cellheight,c=new f.MeshBasicMaterial({color:r.fenceColor,opacity:r.fenceOpacity,side:f.DoubleSide,transparent:!0}),l=(new f.MeshLambertMaterial({color:3381759}),new Float32Array(24)),u=a*o/2,d=t*i/2,s=-n*o/2,h=0,w=0;1>=w;++w)for(var v=0;1>=v;++v)for(var y=0;1>=y;++y)l[h]=w*a*o-u,l[h+1]=v*t*i-d,l[h+2]=-y*n*o-s,h+=3;var m=Int16Array.from([2,0,1,2,1,3,3,1,5,3,5,7,7,4,5,7,6,4,6,0,2,6,4,0]);m=Int16Array.from([0,1,5,0,5,4]);var p=new f.BufferGeometry;p.addAttribute("position",new f.BufferAttribute(l,3)),p.setIndex(new f.BufferAttribute(m,1));var b=new f.Mesh(p,c);e.add(b)}function i(e,r){r=Object.assign({},r,e.conf);for(var t=r,n=(t.mass,t.lay),a=t.row,i=t.col,c=t.array.length,l=t.array,u=r,d=u.cellsize,s=u.cellheight,h=r,w=h.points,v=new f.Group,y=0,m=0;c>m;++m)y+=l[m];y=1.001*y;for(var p=y/w,b=new Float32Array(3*w),A=-i*d/2,g=-n*s/2,M=a*d/2,C=0,P=0,B=0,z=0,S=0,j=0,O=0;a*i*n>O;++O){for(S+=l[O];S>0;)b[z]=(C+Math.random())*d+A,b[z+1]=B*Math.random()*s+g,b[z+2]=-(P+Math.random())*d+M,z+=3,j+=1,S-=p;C+=1,C>=i&&(C=0,P+=1,P>=a&&(B+=1,P=0))}var x=b.slice(0,3*j),L=new f.BufferGeometry;L.addAttribute("position",new f.BufferAttribute(x,3)),L.computeBoundingSphere();var F=new f.PointsMaterial({color:r.pointColor,size:r.pointSize,opacity:r.opacity,sizeAttenuation:r.sizeAttenuation}),_=new f.Points(L,F);return _.__data=r,v.add(_),o(v,r),v}function c(e,r){var t=e,n=r;n||(n=t.replace(".json",".data"));var a=fetch(t).then(function(e){return e.json()}),o=fetch(n).then(function(e){return e.arrayBuffer()});return Promise.all([a,o]).then(function(e){var r=l(e,2),t=r[0],n=r[1];return t.array=new Float32Array(n),t})}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,r){var t=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(l){a=!0,o=l}finally{try{!n&&c["return"]&&c["return"]()}finally{if(a)throw o}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();r.CreateScene=n,r.FetchData=c;{var u=e("three/build/three"),f=t(u);e("lodash/lodash")}a.createCamera=function(e){var r=e.renderer,t=r.domElement,n=t.width,a=t.height,o=2.5,i=new f.PerspectiveCamera(45,n/a,1,1e5);return i.position.set(-100*o,-100*o,100*o),i.lookAt(new f.Vector3(0*o,0*o,0*o)),i.updateProjectionMatrix(),i},i.createCamera=function(e,r){r=Object.assign({},r,e.conf);var t=e.renderer,n=t.domElement,a=n.width,o=n.height,i=r,c=i.cellsize,l=(i.cellheight,i.row),u=(i.col,i.lay,new f.PerspectiveCamera(45,a/o,1,1e7));return u.position.set(0,0,l*c*2),u.lookAt(new f.Vector3(0,0,0)),u.updateProjectionMatrix(),u};var d={grid0:a,data0:i};r.CLOUDS=d});