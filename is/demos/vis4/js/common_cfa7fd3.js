define("common",function(e,r){"use strict";function t(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r["default"]=e,r}function n(e){var r=e,t=window.innerWidth,n=window.innerHeight,o=new f.Scene,a=new f.WebGLRenderer({antialias:!0,alpha:!1});return a.setClearColor(r.conf.clearColor,r.conf.clearOpacity),a.setSize(t,n),a.setPixelRatio(window.devicePixelRatio),document.body.appendChild(a.domElement),e.scene=o,e.renderer=a,e}function o(){for(var e=300,r=100,t=20,n=5,o=new f.BufferGeometry,a=new Float32Array(e*r*t*3),i=0,l=0;e>l;l++)for(var c=0;r>c;c++)for(var u=0;t>u;u++)a[i]=l*n+Math.random()*n,a[i+1]=c*n+Math.random()*n,a[i+2]=u*n+Math.random()*n,i+=3;o.addAttribute("position",new f.BufferAttribute(a,3)),o.computeBoundingSphere();var d=new Float32Array(e*r*t*3);i=0;for(var l=0;e>l;l++)for(var c=0;r>c;c++)for(var u=0;t>u;u++)d[i]=1-.7*l/e,d[i+1]=1-.8*c/r,d[i+2]=1-.5*u/t,i+=3;o.addAttribute("color",new f.BufferAttribute(d,3));var s=new f.PointsMaterial({vertexColors:f.VertexColors,size:1.1,opacity:.2,sizeAttenuation:!1}),h=new f.Points(o,s);return h}function a(e,r){for(var t=r.lay,n=r.row,o=r.col,a=r.cellsize,i=r.cellheight,l=new f.MeshBasicMaterial({color:r.fenceColor,opacity:r.fenceOpacity,side:f.DoubleSide,transparent:!0}),c=(new f.MeshLambertMaterial({color:3381759}),new Float32Array(24)),u=o*a/2,d=t*i/2,s=-n*a/2,h=0,w=0;1>=w;++w)for(var v=0;1>=v;++v)for(var y=0;1>=y;++y)c[h]=w*o*a-u,c[h+1]=v*t*i-d,c[h+2]=-y*n*a-s,h+=3;var p=Int16Array.from([2,0,1,2,1,3,3,1,5,3,5,7,7,4,5,7,6,4,6,0,2,6,4,0]);p=Int16Array.from([0,1,5,0,5,4]);var m=new f.BufferGeometry;m.addAttribute("position",new f.BufferAttribute(c,3)),m.setIndex(new f.BufferAttribute(p,1));var A=new f.Mesh(m,l);e.add(A)}function i(e,r){r=d._.merge({},r,e.conf);for(var t=r,n=(t.mass,t.lay),o=t.row,i=t.col,l=t.array.length,c=t.array,u=r,s=u.cellsize,h=u.cellheight,w=r,v=w.points,y=new f.Group,p=0,m=0;l>m;++m)p+=c[m];p=1.001*p;for(var A=p/v,b=new Float32Array(3*v),M=-i*s/2,C=-n*h/2,g=o*s/2,P=0,B=0,z=0,S=0,x=0,_=0,m=0;o*i*n>m;++m){for(x+=c[m];x>0;)b[S]=(P+Math.random())*s+M,b[S+1]=z*Math.random()*h+C,b[S+2]=-(B+Math.random())*s+g,S+=3,_+=1,x-=A;P+=1,P>=i&&(P=0,B+=1,B>=o&&(z+=1,B=0))}var j=b.slice(0,3*_),O=new f.BufferGeometry;O.addAttribute("position",new f.BufferAttribute(j,3)),O.computeBoundingSphere();var F=new f.PointsMaterial({color:r.pointColor,size:r.pointSize,opacity:r.opacity,sizeAttenuation:r.sizeAttenuation}),G=new f.Points(O,F);return G.__data=r,y.add(G),a(y,r),y}function l(e,r){var t=e,n=r;n||(n=t.replace(".json",".data"));var o=fetch(t).then(function(e){return e.json()}),a=fetch(n).then(function(e){return e.arrayBuffer()});return Promise.all([o,a]).then(function(e){var r=c(e,2),t=r[0],n=r[1],o=new Float32Array(n);return t.array=o,t})}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,r){var t=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(c){o=!0,a=c}finally{try{!n&&l["return"]&&l["return"]()}finally{if(o)throw a}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();r.CreateScene=n,r.FetchData=l;var u=e("three/build/three"),f=t(u),d=e("lodash/lodash");o.createCamera=function(e){var r=e.renderer,t=r.domElement,n=t.width,o=t.height,a=2.5,i=new f.PerspectiveCamera(45,n/o,1,1e5);return i.position.set(-100*a,-100*a,100*a),i.lookAt(new f.Vector3(0*a,0*a,0*a)),i.updateProjectionMatrix(),i},i.createCamera=function(e,r){r=d._.merge({},r,e.conf);var t=e.renderer,n=t.domElement,o=n.width,a=n.height,i=r,l=i.cellsize,c=(i.cellheight,i.row),u=(i.col,i.lay,new f.PerspectiveCamera(45,o/a,1,1e7));return u.position.set(0,0,c*l*2),u.lookAt(new f.Vector3(0,0,0)),u.updateProjectionMatrix(),u};var s={grid0:o,data0:i};r.CLOUDS=s});